<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Blockchain Expert - Dauphine</title>
    <!-- Importation du design (Tailwind CSS) et des ic√¥nes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        /* Styles pour le feedback des checkboxes - version rose */
        .checkbox-wrapper input:checked + div {
            border-color: #ec4899; /* rose */
            background-color: #fdf2f8; /* rose tr√®s clair */
            box-shadow: 0 4px 6px -1px rgba(236, 72, 153, 0.25);
        }
        .checkbox-wrapper input:checked + div .check-icon {
            opacity: 1;
            transform: scale(1);
        }
        /* Animation d'apparition */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body class="bg-pink-50 text-slate-800 min-h-screen flex flex-col">

    <!-- En-t√™te -->
    <header class="bg-pink-700 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-3xl mx-auto flex justify-between items-center">
            <h1 class="text-lg md:text-xl font-bold flex items-center">
                <i class="fa-solid fa-link mr-2"></i>Blockchain Expert
            </h1>
            <div class="text-sm bg-pink-600 px-4 py-1.5 rounded-full border border-pink-900/50">
                Score actuel: <span id="current-score" class="font-bold text-white">0</span>
            </div>
        </div>
    </header>

    <!-- Contenu Principal -->
    <main class="flex-grow p-4 md:p-8">
        <div class="max-w-3xl mx-auto">

            <!-- √âcran d'Introduction -->
            <div id="intro-screen" class="bg-white rounded-2xl shadow-xl p-8 border-t-8 border-pink-500">
                <h2 class="text-3xl font-extrabold mb-6 text-slate-900">Examen Blanc Technique</h2>
                <div class="bg-pink-50 border-l-4 border-pink-400 p-4 mb-6">
                    <p class="font-bold text-pink-800 mb-2">‚ö†Ô∏è Mode Expert Activ√©</p>
                    <ul class="list-disc list-inside space-y-1 text-pink-700 text-sm">
                        <li><strong>Choix Multiples :</strong> Plusieurs r√©ponses peuvent √™tre correctes.</li>
                        <li><strong>Bonus :</strong> <span class="font-bold text-green-600">+1 point</span> par bonne case coch√©e.</li>
                        <li><strong>Malus :</strong> <span class="font-bold text-red-500">-0.5 point</span> par erreur.</li>
                        <li><strong>Neutre :</strong> 0 point si vous ne cochez rien.</li>
                    </ul>
                </div>
                <button onclick="app.startQuiz()" class="w-full bg-pink-500 hover:bg-pink-600 text-white text-lg font-bold py-4 px-6 rounded-xl transition duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                    Lancer le QCM
                </button>
            </div>

            <!-- √âcran du Quiz (Cach√© par d√©faut) -->
            <div id="quiz-screen" class="hidden space-y-6">
                <!-- Barre de progression -->
                <div class="w-full bg-pink-100 rounded-full h-3 overflow-hidden">
                    <div id="progress-bar" class="bg-pink-500 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 relative overflow-hidden">
                    <!-- Badge Th√®me -->
                    <div class="absolute top-0 right-0 bg-pink-50 px-4 py-2 rounded-bl-xl text-xs font-bold text-pink-600 uppercase tracking-wider" id="topic-badge">
                        Th√®me
                    </div>

                    <p class="text-pink-500 font-bold text-sm mb-2">QUESTION <span id="q-number">1</span>/10</p>
                    
                    <h3 id="question-text" class="text-xl md:text-2xl font-bold mb-8 text-slate-800 leading-snug">
                        Chargement...
                    </h3>
                    
                    <!-- Options -->
                    <div id="options-list" class="space-y-3">
                        <!-- Les options seront ins√©r√©es ici par JS -->
                    </div>

                    <!-- Zone de Feedback (Correction) -->
                    <div id="feedback-box" class="hidden mt-8 p-6 rounded-xl bg-pink-50 border border-pink-100 animate-fade-in">
                        <!-- Le texte de correction ira ici -->
                    </div>

                    <!-- Boutons d'action -->
                    <div class="mt-8 pt-6 border-t border-pink-100 flex justify-end">
                        <button id="btn-validate" onclick="app.validate()" class="bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-8 rounded-xl transition shadow-md hover:shadow-lg">
                            Valider ma r√©ponse
                        </button>
                        <button id="btn-next" onclick="app.next()" class="hidden bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-8 rounded-xl transition shadow-md hover:shadow-lg flex items-center">
                            Suivant <i class="fa-solid fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- √âcran de R√©sultats (Cach√© par d√©faut) -->
            <div id="result-screen" class="hidden bg-white rounded-2xl shadow-xl p-8 text-center">
                <div class="w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fa-solid fa-award text-5xl text-pink-500"></i>
                </div>
                <h2 class="text-3xl font-bold mb-2 text-slate-800">Termin√© !</h2>
                <p class="text-slate-500 mb-8">Voici votre performance finale</p>
                
                <div class="inline-block border-4 border-pink-500 rounded-2xl p-6 mb-8 bg-pink-50">
                    <div class="text-6xl font-black text-pink-600 leading-none mb-2">
                        <span id="final-score">0</span>
                    </div>
                    <div class="text-sm font-semibold text-pink-400 uppercase tracking-widest">Points</div>
                </div>
                
                <p class="text-sm text-gray-400 mb-8">Score maximum th√©orique : <span id="max-score">0</span> pts</p>

                <div id="final-message" class="p-4 rounded-lg mb-8 text-lg font-medium"></div>

                <button onclick="location.reload()" class="bg-white border-2 border-pink-500 text-pink-600 hover:bg-pink-50 font-bold py-3 px-8 rounded-xl transition">
                    Recommencer le test
                </button>
            </div>

        </div>
    </main>

    <!-- Pied de page -->
    <footer class="text-center p-4 text-gray-400 text-xs">
        &copy; 2025 Dauphine Review - Blockchain Expert
    </footer>

    <!-- DONN√âES ET LOGIQUE DU QUIZ -->
    <script>
        const quizData = [
            {
                topic: "Architecture",
                question: "Concernant le passage d'Ethereum au Proof of Stake (The Merge) :",
                options: [
                    { id: 0, text: "La mise √† jour a r√©duit les frais de gaz (Gas fees) de mani√®re significative.", isCorrect: false },
                    { id: 1, text: "Elle a r√©duit la consommation √©nerg√©tique du r√©seau de plus de 99 %.", isCorrect: true },
                    { id: 2, text: "Elle permet aux validateurs de retirer leurs ETH stak√©s imm√©diatement.", isCorrect: false },
                    { id: 3, text: "Les validateurs risquent le 'Slashing' en cas de faute grave.", isCorrect: true }
                ],
                explain: "Le Merge a chang√© le consensus (√©nergie, s√©curit√©) mais n'a pas augment√© la capacit√© de bloc, donc les frais n'ont pas baiss√© (c'est le r√¥le des Layer 2). Le retrait des ETH a n√©cessit√© une autre mise √† jour (Shanghai)."
            },
            {
                topic: "Scalabilit√©",
                question: "√Ä propos des solutions de Scalabilit√© (Rollups) :",
                options: [
                    { id: 0, text: "Les Optimistic Rollups utilisent des preuves de fraude (Fraud Proofs).", isCorrect: true },
                    { id: 1, text: "Les ZK-Rollups utilisent des preuves de validit√© math√©matique.", isCorrect: true },
                    { id: 2, text: "Une Sidechain h√©rite totalement de la s√©curit√© d'Ethereum.", isCorrect: false },
                    { id: 3, text: "La Disponibilit√© des Donn√©es (Data Availability) sur L1 est critique.", isCorrect: true }
                ],
                explain: "Les Sidechains ont leurs propres validateurs et sont moins s√©curis√©es. Les Rollups h√©ritent de la s√©curit√© car ils publient leurs donn√©es sur Ethereum."
            },
            {
                topic: "DeFi",
                question: "Concernant les AMM (ex: Uniswap) :",
                options: [
                    { id: 0, text: "Ils utilisent un carnet d'ordres centralis√©.", isCorrect: false },
                    { id: 1, text: "Les fournisseurs de liquidit√© risquent l'Impermanent Loss.", isCorrect: true },
                    { id: 2, text: "La Liquidit√© Concentr√©e (v3) am√©liore l'efficacit√© du capital.", isCorrect: true },
                    { id: 3, text: "Les frais de trading sont br√ªl√©s (d√©truits).", isCorrect: false }
                ],
                explain: "Les AMM n'ont pas de carnet d'ordres. Les frais sont vers√©s aux fournisseurs de liquidit√© (LPs), pas br√ªl√©s."
            },
            {
                topic: "Stablecoins",
                question: "√Ä propos des Stablecoins :",
                options: [
                    { id: 0, text: "USDC et USDT sont centralis√©s avec r√©serves Off-Chain.", isCorrect: true },
                    { id: 1, text: "DAI est d√©centralis√© et sur-collat√©ralis√© par des cryptos.", isCorrect: true },
                    { id: 2, text: "L'UST (Terra) a √©chou√© √† cause de son mod√®le algorithmique.", isCorrect: true },
                    { id: 3, text: "Tous les stablecoins sont garantis par de l'or.", isCorrect: false }
                ],
                explain: "Seuls certains stablecoins comme PAXG sont garantis par de l'or. Les plus gros (USDT/USDC) utilisent des dollars et bons du tr√©sor."
            },
            {
                topic: "Infrastructure",
                question: "La 'Maximal Extractable Value' (MEV) :",
                options: [
                    { id: 0, text: "Est une valeur extraite en r√©organisant l'ordre des transactions.", isCorrect: true },
                    { id: 1, text: "L'attaque 'Sandwich' est une forme courante de MEV.", isCorrect: true },
                    { id: 2, text: "La MEV a totalement disparu avec le Proof of Stake.", isCorrect: false },
                    { id: 3, text: "Flashbots est un outil pour g√©rer la MEV.", isCorrect: true }
                ],
                explain: "La MEV existe toujours sous PoS (elle est captur√©e par les validateurs et les constructeurs de blocs)."
            },
            {
                topic: "DeFi Avanc√©e",
                question: "Concernant les Flash Loans (Pr√™ts Flash) :",
                options: [
                    { id: 0, text: "Ils n√©cessitent un collat√©ral (garantie) de 150%.", isCorrect: false },
                    { id: 1, text: "L'emprunt et le remboursement se font dans la m√™me transaction.", isCorrect: true },
                    { id: 2, text: "Si l'emprunteur ne rembourse pas, la transaction est annul√©e.", isCorrect: true },
                    { id: 3, text: "Ils sont souvent utilis√©s pour l'arbitrage.", isCorrect: true }
                ],
                explain: "La sp√©cificit√© du Flash Loan est l'absence de collat√©ral gr√¢ce √† l'atomicit√© de la transaction blockchain."
            },
            {
                topic: "Interop√©rabilit√©",
                question: "Les Ponts (Bridges) blockchain :",
                options: [
                    { id: 0, text: "Le m√©canisme 'Lock & Mint' est tr√®s courant.", isCorrect: true },
                    { id: 1, text: "Si la blockchain A est hack√©e, les tokens sur B ne craignent rien.", isCorrect: false },
                    { id: 2, text: "Les bridges sont historiquement des cibles fr√©quentes de hacks.", isCorrect: true },
                    { id: 3, text: "Le protocole IBC (Cosmos) permet l'interop√©rabilit√© native.", isCorrect: true }
                ],
                explain: "Si le coffre sur la cha√Æne A est vid√©, les tokens synth√©tiques sur la cha√Æne B perdent leur valeur (depeg)."
            },
            {
                topic: "Bitcoin",
                question: "√âvolutions de Bitcoin :",
                options: [
                    { id: 0, text: "Lightning Network est un Layer 2 de paiement rapide.", isCorrect: true },
                    { id: 1, text: "Taproot am√©liore la confidentialit√© et l'efficacit√©.", isCorrect: true },
                    { id: 2, text: "Les Ordinals permettent de cr√©er des NFT sur Bitcoin.", isCorrect: true },
                    { id: 3, text: "Bitcoin supporte nativement les smart contracts complexes (Solidity).", isCorrect: false }
                ],
                explain: "Bitcoin utilise un langage de script limit√© (Script) et ne supporte pas nativement les smart contracts complexes comme Ethereum."
            },
            {
                topic: "Wallet",
                question: "L'Abstraction de Compte (Account Abstraction) :",
                options: [
                    { id: 0, text: "Transforme les wallets en Smart Contracts.", isCorrect: true },
                    { id: 1, text: "Permet la r√©cup√©ration sociale du compte.", isCorrect: true },
                    { id: 2, text: "Permet de payer le gaz avec un token (ex: USDC) au lieu d'ETH.", isCorrect: true },
                    { id: 3, text: "Rend toutes les transactions invisibles sur la blockchain.", isCorrect: false }
                ],
                explain: "L'Account Abstraction am√©liore l'exp√©rience utilisateur (UX) mais ne rend pas la blockchain priv√©e ou anonyme."
            },
            {
                topic: "Th√©orie",
                question: "Le Trilemme de la Blockchain concerne l'√©quilibre entre :",
                options: [
                    { id: 0, text: "Confidentialit√©", isCorrect: false },
                    { id: 1, text: "D√©centralisation", isCorrect: true },
                    { id: 2, text: "S√©curit√©", isCorrect: true },
                    { id: 3, text: "Scalabilit√©", isCorrect: true }
                ],
                explain: "Le trilemme classique est : D√©centralisation, S√©curit√©, Scalabilit√©. La confidentialit√© est un autre sujet."
            }
        ];

        const app = {
            currentIdx: 0,
            score: 0,
            maxScore: 0,

            init: function() {
                // Calcul du score max th√©orique
                this.maxScore = quizData.reduce((acc, q) => {
                    return acc + q.options.filter(o => o.isCorrect).length;
                }, 0);
            },

            startQuiz: function() {
                document.getElementById('intro-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                this.loadQuestion();
            },

            loadQuestion: function() {
                const q = quizData[this.currentIdx];
                
                // Mise √† jour UI
                document.getElementById('q-number').innerText = this.currentIdx + 1;
                document.getElementById('question-text').innerText = q.question;
                document.getElementById('topic-badge').innerText = q.topic;
                
                // Barre de progression
                const progress = ((this.currentIdx) / quizData.length) * 100;
                document.getElementById('progress-bar').style.width = `${progress}%`;

                // Reset √©tats
                document.getElementById('btn-validate').classList.remove('hidden');
                document.getElementById('btn-next').classList.add('hidden');
                document.getElementById('feedback-box').classList.add('hidden');

                // G√©n√©ration des options
                const list = document.getElementById('options-list');
                list.innerHTML = '';

                q.options.forEach((opt, idx) => {
                    const label = document.createElement('label');
                    label.className = "checkbox-wrapper cursor-pointer block relative group";
                    label.innerHTML = `
                        <input type="checkbox" name="opt" value="${idx}" class="peer sr-only">
                        <div class="p-4 md:p-5 rounded-xl border-2 border-slate-200 hover:border-pink-300 transition-all duration-200 flex items-center justify-between bg-white peer-checked:border-pink-500 peer-checked:bg-pink-50">
                            <span class="text-slate-700 font-medium text-lg">${opt.text}</span>
                            <div class="check-icon opacity-0 text-pink-500 transition-all transform scale-50">
                                <i class="fa-solid fa-circle-check text-2xl"></i>
                            </div>
                        </div>
                    `;
                    list.appendChild(label);
                });
            },

            validate: function() {
                const inputs = document.querySelectorAll('input[name="opt"]');
                const q = quizData[this.currentIdx];
                let questionScore = 0;
                let anyChecked = false;

                // Calcul du score
                inputs.forEach(input => {
                    input.disabled = true; // D√©sactiver les inputs
                    const idx = parseInt(input.value);
                    const isChecked = input.checked;
                    const isCorrect = q.options[idx].isCorrect;
                    const div = input.nextElementSibling;

                    if (isChecked) anyChecked = true;

                    // Marquage visuel
                    if (isCorrect) {
                        div.classList.remove('border-slate-200', 'bg-white');
                        div.classList.add('border-green-500', 'bg-green-50');
                        // Ajout badge +1
                        if (isChecked) {
                            questionScore += 1;
                            div.innerHTML += '<span class="absolute top-2 right-2 bg-green-200 text-green-800 text-xs font-bold px-2 py-1 rounded">+1</span>';
                        } else {
                            div.innerHTML += '<span class="absolute top-2 right-2 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded">Manqu√©</span>';
                        }
                    } else if (isChecked && !isCorrect) {
                        questionScore -= 0.5;
                        div.classList.remove('border-pink-500', 'bg-pink-50');
                        div.classList.add('border-red-500', 'bg-red-50');
                        div.innerHTML += '<span class="absolute top-2 right-2 bg-red-200 text-red-800 text-xs font-bold px-2 py-1 rounded">-0.5</span>';
                        // Changer l'ic√¥ne en croix
                        div.querySelector('.check-icon i').className = "fa-solid fa-circle-xmark text-red-500 text-2xl";
                        div.querySelector('.check-icon').style.opacity = "1";
                    }
                });

                this.score += questionScore;
                
                // Mise √† jour Score Header avec animation couleur
                const scoreEl = document.getElementById('current-score');
                scoreEl.innerText = this.score;
                if(questionScore < 0) {
                    scoreEl.parentElement.classList.add('bg-red-600');
                    setTimeout(() => scoreEl.parentElement.classList.remove('bg-red-600'), 500);
                } else if(questionScore > 0) {
                    scoreEl.parentElement.classList.add('bg-green-600');
                    setTimeout(() => scoreEl.parentElement.classList.remove('bg-green-600'), 500);
                }

                // Affichage Feedback
                const fbBox = document.getElementById('feedback-box');
                fbBox.classList.remove('hidden');
                
                let scoreColor = questionScore > 0 ? 'text-green-700' : (questionScore < 0 ? 'text-red-700' : 'text-gray-600');
                let scoreText = questionScore > 0 ? `+${questionScore}` : questionScore;

                fbBox.innerHTML = `
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-xl font-bold ${scoreColor}">R√©sultat : ${scoreText} pts</span>
                    </div>
                    <p class="text-slate-600 leading-relaxed"><i class="fa-solid fa-lightbulb text-yellow-500 mr-2"></i>${q.explain}</p>
                `;

                // Changement bouton
                document.getElementById('btn-validate').classList.add('hidden');
                const nextBtn = document.getElementById('btn-next');
                nextBtn.classList.remove('hidden');
                
                if (this.currentIdx === quizData.length - 1) {
                    nextBtn.innerHTML = 'Voir mon bilan <i class="fa-solid fa-flag-checkered ml-2"></i>';
                }
            },

            next: function() {
                if (this.currentIdx < quizData.length - 1) {
                    this.currentIdx++;
                    this.loadQuestion();
                } else {
                    this.showResults();
                }
            },

            showResults: function() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');
                
                document.getElementById('final-score').innerText = this.score;
                document.getElementById('max-score').innerText = this.maxScore;

                const msgDiv = document.getElementById('final-message');
                const ratio = this.score / this.maxScore;

                if (ratio >= 0.8) {
                    msgDiv.className = "bg-green-100 text-green-800 p-6 rounded-xl";
                    msgDiv.innerHTML = "<strong>Excellent ! üöÄ</strong><br>Vous √™tes pr√™t pour la DeFi et le Web3. Le niveau technique est tr√®s solide.";
                } else if (ratio >= 0.5) {
                    msgDiv.className = "bg-blue-100 text-blue-800 p-6 rounded-xl";
                    msgDiv.innerHTML = "<strong>Bien jou√© ! üëç</strong><br>Les bases sont acquises. Attention aux subtilit√©s techniques et aux malus.";
                } else {
                    msgDiv.className = "bg-red-100 text-red-800 p-6 rounded-xl";
                    msgDiv.innerHTML = "<strong>Attention ‚ö†Ô∏è</strong><br>Les points n√©gatifs ont fait mal. Il faut revoir les m√©canismes de consensus et les bases de la DeFi.";
                }
            }
        };

        // D√©marrage
        app.init();
    </script>
</body>
</html>
