<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Blockchain Expert - Dauphine</title>
    <!-- Tailwind CSS & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }

        /* Styles pour le feedback des checkboxes (version pink) */
        .checkbox-wrapper input:checked + div {
            border-color: #ec4899; /* pink-500 */
            background-color: #fdf2f8; /* pink-50 */
            box-shadow: 0 6px 12px -2px rgba(236, 72, 153, 0.45);
        }
        .checkbox-wrapper input:checked + div .check-icon {
            opacity: 1;
            transform: scale(1);
        }

        /* Animation d'apparition */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-pink-100 via-rose-50 to-fuchsia-100 text-rose-900 min-h-screen flex flex-col">

    <!-- En-t√™te -->
    <header class="bg-pink-600/90 backdrop-blur text-white p-4 shadow-lg shadow-pink-300 sticky top-0 z-50">
        <div class="max-w-3xl mx-auto flex justify-between items-center">
            <h1 class="text-lg md:text-xl font-bold flex items-center gap-2">
                <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-white/20">
                    <i class="fa-solid fa-link text-sm"></i>
                </span>
                <span>Blockchain Expert üíñ</span>
            </h1>
            <div class="text-xs md:text-sm bg-pink-500 px-4 py-1.5 rounded-full border border-pink-300 shadow-md flex items-center gap-2">
                <span class="hidden sm:inline">Score actuel</span>
                <span class="font-extrabold text-white text-base md:text-lg" id="current-score">0</span>
                <span class="text-pink-100 text-[10px] uppercase tracking-widest">pts</span>
            </div>
        </div>
    </header>

    <!-- Contenu Principal -->
    <main class="flex-grow p-4 md:p-8">
        <div class="max-w-3xl mx-auto space-y-6">

            <!-- √âcran d'Introduction -->
            <div id="intro-screen" class="bg-white/80 backdrop-blur rounded-3xl shadow-xl shadow-pink-200 p-8 border border-pink-100 relative overflow-hidden">
                <div class="absolute -top-10 -right-6 w-32 h-32 bg-pink-200/60 rounded-full blur-2xl"></div>
                <div class="absolute -bottom-12 -left-10 w-40 h-40 bg-fuchsia-200/60 rounded-full blur-3xl"></div>

                <div class="relative">
                    <p class="inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-pink-500 mb-2 bg-pink-50 px-3 py-1 rounded-full border border-pink-100">
                        <i class="fa-solid fa-wand-sparkles text-pink-400"></i>
                        Web3 girlboss mode
                    </p>
                    <h2 class="text-3xl font-extrabold mb-3 text-rose-900">
                        Examen Blanc Technique
                    </h2>
                    <p class="text-sm text-rose-500 mb-6">
                        QCM blockchain, mais version cute & deadly serious √† la fois üíÖ
                    </p>

                    <div class="bg-pink-50 border border-pink-200/80 rounded-2xl p-4 mb-6 flex gap-3">
                        <div class="mt-1">
                            <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-white border border-pink-200 text-pink-500">
                                ‚ö†Ô∏è
                            </span>
                        </div>
                        <div>
                            <p class="font-bold text-pink-800 mb-2 text-sm">Mode Expert Activ√©</p>
                            <ul class="list-disc list-inside space-y-1 text-pink-800 text-sm">
                                <li><strong>Choix Multiples :</strong> Plusieurs r√©ponses peuvent √™tre correctes.</li>
                                <li><strong>Bonus :</strong> <span class="font-bold text-emerald-600">+1 point</span> par bonne case coch√©e.</li>
                                <li><strong>Malus :</strong> <span class="font-bold text-red-500">-0.5 point</span> par erreur.</li>
                                <li><strong>Neutre :</strong> 0 point si tu ne coches rien.</li>
                            </ul>
                        </div>
                    </div>

                    <button
                        onclick="app.startQuiz()"
                        class="w-full bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-500 hover:from-pink-600 hover:via-fuchsia-600 hover:to-purple-600 text-white text-lg font-bold py-4 px-6 rounded-2xl transition duration-200 shadow-lg shadow-pink-300 hover:shadow-pink-400 transform hover:-translate-y-0.5 flex items-center justify-center gap-2"
                    >
                        Lancer le QCM ‚ú®
                    </button>
                </div>
            </div>

            <!-- √âcran du Quiz -->
            <div id="quiz-screen" class="hidden space-y-6">
                <!-- Barre de progression -->
                <div class="w-full bg-pink-100 rounded-full h-3 overflow-hidden border border-pink-200/70">
                    <div id="progress-bar" class="bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-500 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                </div>

                <div class="bg-white/90 backdrop-blur rounded-3xl shadow-xl shadow-pink-200 p-6 md:p-8 relative overflow-hidden border border-pink-100">
                    <!-- D√©cos -->
                    <div class="absolute -top-6 right-4 w-16 h-16 bg-pink-100 rounded-full blur-xl opacity-70"></div>

                    <!-- Badge Th√®me -->
                    <div class="absolute top-0 right-0 bg-pink-50/90 px-4 py-2 rounded-bl-3xl text-[11px] font-bold text-pink-500 uppercase tracking-[0.22em] border-l border-b border-pink-100" id="topic-badge">
                        Th√®me
                    </div>

                    <p class="text-pink-500 font-semibold text-xs mb-2 tracking-[0.18em] uppercase">
                        Question <span id="q-number">1</span> / 10
                    </p>
                    
                    <h3 id="question-text" class="text-xl md:text-2xl font-bold mb-6 text-rose-900 leading-snug">
                        Chargement...
                    </h3>
                    
                    <!-- Options -->
                    <div id="options-list" class="space-y-3">
                        <!-- Options inject√©es par JS -->
                    </div>

                    <!-- Zone de Feedback -->
                    <div id="feedback-box" class="hidden mt-7 p-5 rounded-2xl bg-rose-50 border border-rose-100 animate-fade-in">
                        <!-- Texte de correction inject√© ici -->
                    </div>

                    <!-- Boutons d'action -->
                    <div class="mt-8 pt-5 border-t border-pink-100 flex justify-end gap-3">
                        <button
                            id="btn-validate"
                            onclick="app.validate()"
                            class="bg-rose-900 hover:bg-rose-950 text-rose-50 font-semibold py-3 px-6 md:px-8 rounded-2xl text-sm md:text-base transition shadow-md hover:shadow-lg shadow-rose-300"
                        >
                            Valider ma r√©ponse
                        </button>
                        <button
                            id="btn-next"
                            onclick="app.next()"
                            class="hidden bg-gradient-to-r from-pink-500 to-fuchsia-500 hover:from-pink-600 hover:to-fuchsia-600 text-white font-semibold py-3 px-6 md:px-8 rounded-2xl text-sm md:text-base transition shadow-md hover:shadow-lg shadow-pink-300 flex items-center gap-2"
                        >
                            Suivant <i class="fa-solid fa-arrow-right text-xs"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- √âcran de R√©sultats -->
            <div id="result-screen" class="hidden bg-white/90 backdrop-blur rounded-3xl shadow-xl shadow-pink-200 p-8 text-center border border-pink-100">
                <div class="w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner shadow-pink-200">
                    <i class="fa-solid fa-award text-5xl text-pink-500"></i>
                </div>
                <h2 class="text-3xl font-bold mb-2 text-rose-900">Termin√© !</h2>
                <p class="text-rose-500 mb-6 text-sm">Voici ta performance finale sur ce QCM de l‚Äôenfer (mignon, mais de l‚Äôenfer quand m√™me) üî•</p>
                
                <div class="inline-block border-4 border-pink-500 rounded-3xl p-6 mb-6 bg-pink-50 shadow-md shadow-pink-200">
                    <div class="text-6xl font-black text-pink-600 leading-none mb-1 tracking-tight">
                        <span id="final-score">0</span>
                    </div>
                    <div class="text-xs font-semibold text-pink-400 uppercase tracking-[0.3em]">Points</div>
                </div>
                
                <p class="text-xs text-rose-400 mb-6">
                    Score maximum th√©orique : <span id="max-score">0</span> pts
                </p>

                <div id="final-message" class="p-4 rounded-2xl mb-8 text-base font-medium"></div>

                <button
                    onclick="location.reload()"
                    class="bg-white border-2 border-pink-400 text-pink-600 hover:bg-pink-50 font-semibold py-3 px-8 rounded-2xl transition shadow-sm hover:shadow-md"
                >
                    Recommencer le test üí´
                </button>
            </div>

        </div>
    </main>

    <!-- Pied de page -->
    <footer class="text-center p-4 text-rose-400 text-[11px]">
        &copy; 2025 Dauphine Review - Blockchain Expert ‚ú®
    </footer>

    <!-- DONN√âES ET LOGIQUE DU QUIZ (inchang√©es) -->
    <script>
        const quizData = [
            {
                topic: "Architecture",
                question: "Concernant le passage d'Ethereum au Proof of Stake (The Merge) :",
                options: [
                    { id: 0, text: "La mise √† jour a r√©duit les frais de gaz (Gas fees) de mani√®re significative.", isCorrect: false },
                    { id: 1, text: "Elle a r√©duit la consommation √©nerg√©tique du r√©seau de plus de 99 %.", isCorrect: true },
                    { id: 2, text: "Elle permet aux validateurs de retirer leurs ETH stak√©s imm√©diatement.", isCorrect: false },
                    { id: 3, text: "Les validateurs risquent le 'Slashing' en cas de faute grave.", isCorrect: true }
                ],
                explain: "Le Merge a chang√© le consensus (√©nergie, s√©curit√©) mais n'a pas augment√© la capacit√© de bloc, donc les frais n'ont pas baiss√© (c'est le r√¥le des Layer 2). Le retrait des ETH a n√©cessit√© une autre mise √† jour (Shanghai)."
            },
            {
                topic: "Scalabilit√©",
                question: "√Ä propos des solutions de Scalabilit√© (Rollups) :",
                options: [
                    { id: 0, text: "Les Optimistic Rollups utilisent des preuves de fraude (Fraud Proofs).", isCorrect: true },
                    { id: 1, text: "Les ZK-Rollups utilisent des preuves de validit√© math√©matique.", isCorrect: true },
                    { id: 2, text: "Une Sidechain h√©rite totalement de la s√©curit√© d'Ethereum.", isCorrect: false },
                    { id: 3, text: "La Disponibilit√© des Donn√©es (Data Availability) sur L1 est critique.", isCorrect: true }
                ],
                explain: "Les Sidechains ont leurs propres validateurs et sont moins s√©curis√©es. Les Rollups h√©ritent de la s√©curit√© car ils publient leurs donn√©es sur Ethereum."
            },
            {
                topic: "DeFi",
                question: "Concernant les AMM (ex: Uniswap) :",
                options: [
                    { id: 0, text: "Ils utilisent un carnet d'ordres centralis√©.", isCorrect: false },
                    { id: 1, text: "Les fournisseurs de liquidit√© risquent l'Impermanent Loss.", isCorrect: true },
                    { id: 2, text: "La Liquidit√© Concentr√©e (v3) am√©liore l'efficacit√© du capital.", isCorrect: true },
                    { id: 3, text: "Les frais de trading sont br√ªl√©s (d√©truits).", isCorrect: false }
                ],
                explain: "Les AMM n'ont pas de carnet d'ordres. Les frais sont vers√©s aux fournisseurs de liquidit√© (LPs), pas br√ªl√©s."
            },
            {
                topic: "Stablecoins",
                question: "√Ä propos des Stablecoins :",
                options: [
                    { id: 0, text: "USDC et USDT sont centralis√©s avec r√©serves Off-Chain.", isCorrect: true },
                    { id: 1, text: "DAI est d√©centralis√© et sur-collat√©ralis√© par des cryptos.", isCorrect: true },
                    { id: 2, text: "L'UST (Terra) a √©chou√© √† cause de son mod√®le algorithmique.", isCorrect: true },
                    { id: 3, text: "Tous les stablecoins sont garantis par de l'or.", isCorrect: false }
                ],
                explain: "Seuls certains stablecoins comme PAXG sont garantis par de l'or. Les plus gros (USDT/USDC) utilisent des dollars et bons du tr√©sor."
            },
            {
                topic: "Infrastructure",
                question: "La 'Maximal Extractable Value' (MEV) :",
                options: [
                    { id: 0, text: "Est une valeur extraite en r√©organisant l'ordre des transactions.", isCorrect: true },
                    { id: 1, text: "L'attaque 'Sandwich' est une forme courante de MEV.", isCorrect: true },
                    { id: 2, text: "La MEV a totalement disparu avec le Proof of Stake.", isCorrect: false },
                    { id: 3, text: "Flashbots est un outil pour g√©rer la MEV.", isCorrect: true }
                ],
                explain: "La MEV existe toujours sous PoS (elle est captur√©e par les validateurs et les constructeurs de blocs)."
            },
            {
                topic: "DeFi Avanc√©e",
                question: "Concernant les Flash Loans (Pr√™ts Flash) :",
                options: [
                    { id: 0, text: "Ils n√©cessitent un collat√©ral (garantie) de 150%.", isCorrect: false },
                    { id: 1, text: "L'emprunt et le remboursement se font dans la m√™me transaction.", isCorrect: true },
                    { id: 2, text: "Si l'emprunteur ne rembourse pas, la transaction est annul√©e.", isCorrect: true },
                    { id: 3, text: "Ils sont souvent utilis√©s pour l'arbitrage.", isCorrect: true }
                ],
                explain: "La sp√©cificit√© du Flash Loan est l'absence de collat√©ral gr√¢ce √† l'atomicit√© de la transaction blockchain."
            },
            {
                topic: "Interop√©rabilit√©",
                question: "Les Ponts (Bridges) blockchain :",
                options: [
                    { id: 0, text: "Le m√©canisme 'Lock & Mint' est tr√®s courant.", isCorrect: true },
                    { id: 1, text: "Si la blockchain A est hack√©e, les tokens sur B ne craignent rien.", isCorrect: false },
                    { id: 2, text: "Les bridges sont historiquement des cibles fr√©quentes de hacks.", isCorrect: true },
                    { id: 3, text: "Le protocole IBC (Cosmos) permet l'interop√©rabilit√© native.", isCorrect: true }
                ],
                explain: "Si le coffre sur la cha√Æne A est vid√©, les tokens synth√©tiques sur la cha√Æne B perdent leur valeur (depeg)."
            },
            {
                topic: "Bitcoin",
                question: "√âvolutions de Bitcoin :",
                options: [
                    { id: 0, text: "Lightning Network est un Layer 2 de paiement rapide.", isCorrect: true },
                    { id: 1, text: "Taproot am√©liore la confidentialit√© et l'efficacit√©.", isCorrect: true },
                    { id: 2, text: "Les Ordinals permettent de cr√©er des NFT sur Bitcoin.", isCorrect: true },
                    { id: 3, text: "Bitcoin supporte nativement les smart contracts complexes (Solidity).", isCorrect: false }
                ],
                explain: "Bitcoin utilise un langage de script limit√© (Script) et ne supporte pas nativement les smart contracts complexes comme Ethereum."
            },
            {
                topic: "Wallet",
                question: "L'Abstraction de Compte (Account Abstraction) :",
                options: [
                    { id: 0, text: "Transforme les wallets en Smart Contracts.", isCorrect: true },
                    { id: 1, text: "Permet la r√©cup√©ration sociale du compte.", isCorrect: true },
                    { id: 2, text: "Permet de payer le gaz avec un token (ex: USDC) au lieu d'ETH.", isCorrect: true },
                    { id: 3, text: "Rend toutes les transactions invisibles sur la blockchain.", isCorrect: false }
                ],
                explain: "L'Account Abstraction am√©liore l'exp√©rience utilisateur (UX) mais ne rend pas la blockchain priv√©e ou anonyme."
            },
            {
                topic: "Th√©orie",
                question: "Le Trilemme de la Blockchain concerne l'√©quilibre entre :",
                options: [
                    { id: 0, text: "Confidentialit√©", isCorrect: false },
                    { id: 1, text: "D√©centralisation", isCorrect: true },
                    { id: 2, text: "S√©curit√©", isCorrect: true },
                    { id: 3, text: "Scalabilit√©", isCorrect: true }
                ],
                explain: "Le trilemme classique est : D√©centralisation, S√©curit√©, Scalabilit√©. La confidentialit√© est un autre sujet."
            }
        ];

        const app = {
            currentIdx: 0,
            score: 0,
            maxScore: 0,

            init: function() {
                this.maxScore = quizData.reduce((acc, q) => {
                    return acc + q.options.filter(o => o.isCorrect).length;
                }, 0);
            },

            startQuiz: function() {
                document.getElementById('intro-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                this.loadQuestion();
            },

            loadQuestion: function() {
                const q = quizData[this.currentIdx];
                
                document.getElementById('q-number').innerText = this.currentIdx + 1;
                document.getElementById('question-text').innerText = q.question;
                document.getElementById('topic-badge').innerText = q.topic;
                
                const progress = ((this.currentIdx) / quizData.length) * 100;
                document.getElementById('progress-bar').style.width = `${progress}%`;

                document.getElementById('btn-validate').classList.remove('hidden');
                document.getElementById('btn-next').classList.add('hidden');
                document.getElementById('feedback-box').classList.add('hidden');

                const list = document.getElementById('options-list');
                list.innerHTML = '';

                q.options.forEach((opt, idx) => {
                    const label = document.createElement('label');
                    label.className = "checkbox-wrapper cursor-pointer block relative group";
                    label.innerHTML = `
                        <input type="checkbox" name="opt" value="${idx}" class="peer sr-only">
                        <div class="relative p-4 md:p-5 rounded-2xl border-2 border-rose-100 hover:border-pink-300 transition-all duration-200 flex items-center justify-between bg-white/80 peer-checked:border-pink-500 peer-checked:bg-pink-50">
                            <span class="text-rose-900 font-medium text-sm md:text-lg pr-3">${opt.text}</span>
                            <div class="check-icon opacity-0 text-pink-500 transition-all transform scale-50">
                                <i class="fa-solid fa-circle-check text-2xl"></i>
                            </div>
                        </div>
                    `;
                    list.appendChild(label);
                });
            },

            validate: function() {
                const inputs = document.querySelectorAll('input[name="opt"]');
                const q = quizData[this.currentIdx];
                let questionScore = 0;

                inputs.forEach(input => {
                    input.disabled = true;
                    const idx = parseInt(input.value);
                    const isChecked = input.checked;
                    const isCorrect = q.options[idx].isCorrect;
                    const div = input.nextElementSibling;

                    if (isCorrect) {
                        div.classList.remove('border-rose-100', 'bg-white/80');
                        div.classList.add('border-emerald-400', 'bg-emerald-50');
                        if (isChecked) {
                            questionScore += 1;
                            div.innerHTML += '<span class="absolute top-2 right-2 bg-emerald-200 text-emerald-800 text-[10px] font-bold px-2 py-1 rounded-full">+1</span>';
                        } else {
                            div.innerHTML += '<span class="absolute top-2 right-2 bg-yellow-100 text-yellow-800 text-[10px] font-bold px-2 py-1 rounded-full">Manqu√©</span>';
                        }
                    } else if (isChecked && !isCorrect) {
                        questionScore -= 0.5;
                        div.classList.add('border-red-400', 'bg-red-50');
                        div.innerHTML += '<span class="absolute top-2 right-2 bg-red-200 text-red-800 text-[10px] font-bold px-2 py-1 rounded-full">-0.5</span>';
                        const icon = div.querySelector('.check-icon i');
                        if (icon) {
                            icon.className = "fa-solid fa-circle-xmark text-red-500 text-2xl";
                            div.querySelector('.check-icon').style.opacity = "1";
                        }
                    }
                });

                this.score += questionScore;
                
                const scoreEl = document.getElementById('current-score');
                scoreEl.innerText = this.score;
                const pill = scoreEl.parentElement;

                if (questionScore < 0) {
                    pill.classList.add('bg-red-500');
                    setTimeout(() => pill.classList.remove('bg-red-500'), 500);
                } else if (questionScore > 0) {
                    pill.classList.add('bg-emerald-500');
                    setTimeout(() => pill.classList.remove('bg-emerald-500'), 500);
                }

                const fbBox = document.getElementById('feedback-box');
                fbBox.classList.remove('hidden');
                
                let scoreColor = questionScore > 0 ? 'text-emerald-700' : (questionScore < 0 ? 'text-red-700' : 'text-rose-700');
                let scoreText = questionScore > 0 ? `+${questionScore}` : questionScore;

                fbBox.innerHTML = `
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-white border border-rose-200 text-pink-500">
                            <i class="fa-solid fa-sparkles"></i>
                        </span>
                        <span class="text-lg font-bold ${scoreColor}">R√©sultat : ${scoreText} pts</span>
                    </div>
                    <p class="text-rose-700 text-sm leading-relaxed"><i class="fa-solid fa-lightbulb text-yellow-400 mr-2"></i>${q.explain}</p>
                `;

                document.getElementById('btn-validate').classList.add('hidden');
                const nextBtn = document.getElementById('btn-next');
                nextBtn.classList.remove('hidden');
                
                if (this.currentIdx === quizData.length - 1) {
                    nextBtn.innerHTML = 'Voir mon bilan <i class="fa-solid fa-flag-checkered ml-2 text-xs"></i>';
                }
            },

            next: function() {
                if (this.currentIdx < quizData.length - 1) {
                    this.currentIdx++;
                    this.loadQuestion();
                } else {
                    this.showResults();
                }
            },

            showResults: function() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');
                
                document.getElementById('final-score').innerText = this.score;
                document.getElementById('max-score').innerText = this.maxScore;

                const msgDiv = document.getElementById('final-message');
                const ratio = this.score / this.maxScore;

                if (ratio >= 0.8) {
                    msgDiv.className = "bg-emerald-50 text-emerald-800 p-6 rounded-2xl border border-emerald-200 text-sm md:text-base";
                    msgDiv.innerHTML = "<strong>Excellent ! üöÄ</strong><br>Tu es pr√™te pour la DeFi et le Web3, version pro & fabulous.";
                } else if (ratio >= 0.5) {
                    msgDiv.className = "bg-blue-50 text-blue-800 p-6 rounded-2xl border border-blue-200 text-sm md:text-base";
                    msgDiv.innerHTML = "<strong>Bien jou√© ! üëç</strong><br>Les bases sont l√†. Encore un peu de r√©visions et tu seras on-chain unstoppable.";
                } else {
                    msgDiv.className = "bg-red-50 text-red-800 p-6 rounded-2xl border border-red-200 text-sm md:text-base";
                    msgDiv.innerHTML = "<strong>Attention ‚ö†Ô∏è</strong><br>Les malus t‚Äôont fait mal‚Ä¶ Revois les consensus & la DeFi, et reviens farm le QCM.";
                }
            }
        };

        app.init();
    </script>
</body>
</html>
